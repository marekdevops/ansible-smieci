#!/bin/bash

# Domylna nazwa u偶ytkownika: aktualnie zalogowany
USER_NAME=$(whoami)

echo " Sprawdzenie limit贸w dla u偶ytkownika: $USER_NAME"
echo "----------------------------------------------"
ulimit -a
echo ""

echo " Liczba proces贸w u偶ytkownika $USER_NAME"
ps -u "$USER_NAME" | wc -l
echo ""

echo " Liczba otwartych deskryptor贸w plik贸w przez u偶ytkownika $USER_NAME"
lsof -u "$USER_NAME" | wc -l
echo ""

echo " Limity procesu (obecnego skryptu) z /proc/self/limits"
cat /proc/self/limits
echo ""

# Cz opcjonalna: sprawdzenie limit贸w systemd dla usugi
read -p "Czy chcesz sprawdzi limity systemd dla konkretnej usugi? (tak/nie): " ODPOWIEDZ

if [[ "$ODPOWIEDZ" == "tak" ]]; then
    read -p "Podaj nazw usugi (np. nginx, sshd): " SERVICE
    echo ""
    echo " Limity dla usugi systemd: $SERVICE"
    systemctl show "$SERVICE" | grep -i limit
    echo ""
fi
